# TushpStones - Особый TNT (Black TNT)

## Обзор

В плагине реализована система двух типов TNT:
1. **Обычный TNT** - может взрывать только определённые типы регионов
2. **Особый TNT (Black TNT)** - может взрывать все регионы, независимо от настроек

## Таблица разрушимости

| Тип региона | Материал | Обычный TNT | Особый TNT |
|-------------|----------|-------------|-----------|
| Золотой блок | GOLD_BLOCK | ✓ | ✓ |
| Алмазный блок | DIAMOND_BLOCK | ✓ | ✓ |
| Изумрудная руда | EMERALD_ORE | ✓ | ✓ |
| Древний обломок | ANCIENT_DEBRIS | ✗ | ✓ |
| Незеритовый блок | NETHERITE_BLOCK | ✗ | ✓ |

## Настройка прочности регионов

Каждый взрыв TNT наносит **1 единицу урона**.

**Обычные регионы (максимум 16):**
| Тип региона | Начальная прочность | Максимальная прочность |
|-------------|---------------------|------------------------|
| Золотой блок | 1 | 16 |
| Алмазный блок | 1 | 16 |
| Изумрудная руда | 1 | 16 |

**Особые регионы (максимум 64, только особый TNT):**
| Тип региона | Начальная прочность | Максимальная прочность |
|-------------|---------------------|------------------------|
| Древний обломок | 3 | 64 |
| Незеритовый блок | 3 | 64 |

## Создание особого TNT (Black TNT)

Чтобы создать особый TNT, который может взрывать все регионы:

### Вариант 1: Через команду (если установлен EssentialsX или другой плагин)

```
/i tnt
/lore Этот динамит способен взорвать обсидиан и регионы
```

### Вариант 2: Через NBT редактор

Создайте предмет TNT с NBT тегом лора:
```
{"display":{"Lore":["Этот динамит способен взорвать обсидиан и регионы"]}}
```

### Вариант 3: Через плагин ItemEdit

1. Возьмите TNT в руку
2. Используйте команду редактора
3. Добавьте строку лора: `Этот динамит способен взорвать обсидиан и регионы`

### Вариант 4: Пример команды для серверных админов

```
/give @p tnt{display:{Lore:['{"text":"Этот динамит способен взорвать обсидиан и регионы"}']}} 1
```

## Как это работает

1. **При установке TNT**: Плагин проверяет лор предмета. Если в лоре содержится фраза "Этот динамит способен взорвать обсидиан и регионы", TNT помечается как особый.

2. **При активации TNT**: Когда TNT активируется, плагин находит созданную сущность TNT и помечает её как "особую" в памяти.

3. **При взрыве TNT**: Плагин проверяет, является ли TNT особым:
   - Если да → TNT может взорвать любой регион (если can-be-destroyed: true)
   - Если нет → TNT может взорвать только регионы, где TNT указан в allowed-explosives

## Сообщения игрока

### Обычный TNT против защищённого региона:
```
⚠ Этот приват требует особый динамит!
```

### Особый TNT против защищённого региона (если вдруг регион нельзя взорвать вообще):
```
⚠ Этот приват защищен!
```

## Настройка в blocks.yml

### Для регионов, которые можно взорвать обычным TNT:
```yaml
gold_protection:
  material: GOLD_BLOCK
  can-be-destroyed: true
  allowed-explosives:
    - TNT
  health:
    enabled: true
    default: 1
    max: 16
    upgrade-item: IRON_INGOT
    upgrade-amount: 1
```

### Для регионов, которые можно взорвать ТОЛЬКО особым TNT:
```yaml
ancient_debris_protection:
  material: ANCIENT_DEBRIS
  can-be-destroyed: true
  allowed-explosives: []  # Пустой список = только особый TNT
  health:
    enabled: true
    default: 3
    max: 64
    upgrade-item: NETHERITE_INGOT
    upgrade-amount: 1
```

### Для регионов, которые НЕЛЬЗЯ взорвать вообще:
```yaml
indestructible_protection:
  material: BEDROCK
  can-be-destroyed: false
```

## Система урона от взрывов

Каждый взрыв TNT наносит **1 единицу урона** региону.

Примеры для обычных регионов:
- Золотой блок (1 HP) → уничтожается за 1 взрыв обычным TNT
- Золотой блок (максимум 16 HP) → уничтожается за 16 взрывов
- Алмазный блок (1 HP) → уничтожается за 1 взрыв обычным TNT
- Изумрудная руда (1 HP) → уничтожается за 1 взрыв обычным TNT

Примеры для особых регионов:
- Древний обломок (3 HP) → уничтожается за 3 взрыва особым TNT
- Древний обломок (максимум 64 HP) → уничтожается за 64 взрыва особым TNT
- Незеритовый блок (3 HP) → уничтожается за 3 взрыва особым TNT
- Незеритовый блок (максимум 64 HP) → уничтожается за 64 взрыва особым TNT

**Примечание**: Регионы можно улучшать, используя предметы, указанные в настройках каждого блока привата.

## Важные замечания

1. **Только TNT может взрывать регионы** - другие типы взрывчатки (криперы, вагонетки с TNT, кристаллы края и т.д.) не разрушают регионы.

2. **Лор должен быть точным** - фраза "Этот динамит способен взрывать обсидиан и регионы" должна содержаться в одной из строк лора (цветовые коды игнорируются).

3. **Особый TNT не влияет на indestructible регионы** - если can-be-destroyed: false, даже особый TNT не сможет взорвать такой регион.

4. **Только для Purpur 1.21.x** - плагин оптимизирован для работы на серверах Purpur версии 1.21.

## Отладка

Если особый TNT не работает, проверьте:
1. Лор TNT содержит точную фразу "Этот динамит способен взорвать обсидиан и регионы"
2. В конфиге блока привата can-be-destroyed: true
3. Вы используете именно TNT (не вагонетку с TNT, не крипера)
4. В логах сервера нет ошибок плагина

В логах сервера при активации особого TNT должно появляться сообщение:
```
[TushpStones] TNT с особым лором активирован
[TushpStones] TNTPrimed помечен как BLACK_TNT
```
